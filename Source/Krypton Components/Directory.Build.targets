<Project>
	<!-- For reference, not used
		<Import Project="$([MSBuild]::GetPathOfFileAbove('Directory.Build.targets', '$(MSBuildThisFileDirectory)../../'))" />
		-->

	<Choose>
		<When Condition="'$(Configuration)' == 'Canary'">
			<PropertyGroup>
				<!--REMINDER: When packing, use the proper ISO layout, i.e ddHH-->
				<!--<CurrentDate>$([System.DateTime]::Now.ToString(ddHH))</CurrentDate>-->

				<Minor>$([System.DateTime]::Now.ToString(yyMM))</Minor>
				<Build>$([System.DateTime]::Now.get_DayOfYear().ToString())</Build>

				<!--Version layout:
				6 = Major
				2109 = Minor
				18 = Build
				-alpha = Indicates a pre-release package
				-->
				<LibraryVersion>6.$(Minor).$(Build)</LibraryVersion>

				<!--Nightly-->
				<!--https://docs.microsoft.com/en-us/nuget/create-packages/prerelease-packages-->
				<PackageVersion>6.$(Minor).$(Build)-beta</PackageVersion>

				<AssemblyVersion>6.$(Minor).$(Build)</AssemblyVersion>

				<FileVersion>6.$(Minor).$(Build)</FileVersion>

				<LangVersion>preview</LangVersion>

				<AnalysLevel>preview</AnalysLevel>

				<IncludeSymbols>true</IncludeSymbols>
			</PropertyGroup>
		</When>

		<When Condition="'$(Configuration)' == 'Nightly'">
			<PropertyGroup>
				<!--REMINDER: When packing, use the proper ISO layout, i.e ddHH-->
				<!--<CurrentDate>$([System.DateTime]::Now.ToString(ddHH))</CurrentDate>-->

				<Minor>$([System.DateTime]::Now.ToString(yyMM))</Minor>
				<Build>$([System.DateTime]::Now.get_DayOfYear().ToString())</Build>

				<!--Version layout:
				6 = Major
				2109 = Minor
				18 = Build
				-alpha = Indicates a pre-release package
				-->
				<LibraryVersion>6.$(Minor).$(Build)</LibraryVersion>

				<!--Nightly-->
				<!--https://docs.microsoft.com/en-us/nuget/create-packages/prerelease-packages-->
				<PackageVersion>6.$(Minor).$(Build)-alpha</PackageVersion>

				<AssemblyVersion>6.$(Minor).$(Build)</AssemblyVersion>

				<FileVersion>6.$(Minor).$(Build)</FileVersion>

				<LangVersion>preview</LangVersion>
				
				<AnalysLevel>preview</AnalysLevel>
				
				<IncludeSymbols>true</IncludeSymbols>
			</PropertyGroup>
		</When>

		<When Condition="'$(Configuration)' == 'Signed'">
			<PropertyGroup>
				<!--REMINDER: When packing, use the proper ISO layout, i.e ddHH-->
				<!--<CurrentDate>$([System.DateTime]::Now.ToString(ddHH))</CurrentDate>-->

				<Minor>$([System.DateTime]::Now.ToString(yyMM))</Minor>
				<Build>$([System.DateTime]::Now.get_DayOfYear().ToString())</Build>

				<!--Version layout:
				6 = Major
				2109 = Minor
				18 = Build
				-alpha = Indicates a pre-release package
				-->
				<LibraryVersion>6.$(Minor).$(Build)</LibraryVersion>

				<!--https://docs.microsoft.com/en-us/nuget/create-packages/prerelease-packages-->

				<!--Stable/Signed-->
				<PackageVersion>6.$(Minor).$(Build)</PackageVersion>

				<AssemblyVersion>6.$(Minor).$(Build)</AssemblyVersion>

				<FileVersion>6.$(Minor).$(Build)</FileVersion>

				<LangVersion>preview</LangVersion>

				<AnalysLevel>preview</AnalysLevel>
			</PropertyGroup>
		</When>

		<When Condition="'$(Configuration)' == 'Installer'">
			<PropertyGroup>
				<Minor>$([System.DateTime]::Now.ToString(yy))</Minor>
				<Build>$([System.DateTime]::Now.ToString(MM))</Build>
				<Revision>$([System.DateTime]::Now.get_DayOfYear().ToString())</Revision>

				<!--As WIX installer can only cope with build numbers <= 256, the yyMM layout won't work. 
				 Therefore, the build number for these packages will utilise the month number, assuming
				 that the major number will follow the latest .NET release number.-->
				<LibraryVersion>6.$(Minor).$(Build).$(Revision)</LibraryVersion>

				<PackageVersion>6.$(Minor).$(Build).$(Revision)</PackageVersion>

				<LangVersion>preview</LangVersion>

				<AnalysLevel>preview</AnalysLevel>
			</PropertyGroup>
		</When>
		<Otherwise>
			<PropertyGroup>
				<!--REMINDER: When packing, use the proper ISO layout, i.e ddHH-->
				<!--<CurrentDate>$([System.DateTime]::Now.ToString(ddHH))</CurrentDate>-->

				<Minor>$([System.DateTime]::Now.ToString(yyMM))</Minor>
				<Build>$([System.DateTime]::Now.get_DayOfYear().ToString())</Build>

				<!--Version layout:
				6 = Major
				2109 = Minor
				18 = Build
				-alpha = Indicates a pre-release package
				-->
				<LibraryVersion>6.$(Minor).$(Build)</LibraryVersion>

				<!--https://docs.microsoft.com/en-us/nuget/create-packages/prerelease-packages-->

				<!--Stable/Signed-->
				<PackageVersion>6.$(Minor).$(Build)</PackageVersion>

				<AssemblyVersion>6.$(Minor).$(Build)</AssemblyVersion>

				<FileVersion>6.$(Minor).$(Build)</FileVersion>

				<LangVersion>preview</LangVersion>
				
				<AnalysLevel>preview</AnalysLevel>
			</PropertyGroup>
		</Otherwise>
	</Choose>

	<!--Handle AssemblyInfo-->
	<PropertyGroup>
		<GenerateAssemblyInfo>true</GenerateAssemblyInfo>
		<NeutralLanguage>en</NeutralLanguage>
		<Authors>Peter Wagner (A.K.A Wagnerp) and Simon Coghlan (A.K.A Smurf-IV), Phil Wright (A.K.A ComponentFactory)</Authors>
		<Copyright>Â© Krypton Suite (Peter Wagner (Wagnerp) and Simon Coghlan (Smurf-IV)), 2017 - 2022. Component Factory Pty Ltd (Phil Wright), 2006 - 2016. All rights reserved.</Copyright>
	</PropertyGroup>

	<Choose>
		<When Condition="'$(Configuration)' == 'Canary'">
			<PropertyGroup>
				<PackageId Condition="'$(TFMs)' == 'all'">$(PackageId).Canary</PackageId>

				<Description Condition="'$(TFMs)' == 'all'">
					An update to Component factory's krypton toolkit to support .NET Framework 4.6.2 - 4.8, .NET Core 3.1 and .NET 5/6. $(Description)

					This package supports all .NET Framework versions starting .NET Framework 4.6.2 - 4.8, .NET Core 3.1 and .NET 5/6.
					Also, all libraries are included targeting each specific framework version for performance purposes.

					This package is for those who want to try out the latest features before deployment. Please use $(PackageId) or $(PackageId).Signed if deployment is intended.
				</Description>
			</PropertyGroup>
		</When>

		<When Condition="'$(Configuration)' == 'Signed'">
			<PropertyGroup>
				<PackageId Condition="'$(TFMs)' == 'all'">$(PackageId).Signed</PackageId>

				<Description Condition="'$(TFMs)' == 'all'">
					An update to Component factory's krypton toolkit to support .NET Framework 4.6.2 - 4.8, .NET Core 3.1 and .NET 5/6. $(Description)

					This package supports all .NET Framework versions starting .NET Framework 4.6.2 - 4.8, .NET Core 3.1 and .NET 5/6.
					Also, all libraries are included targeting each specific framework version for performance purposes.

					The binaries contained in this package have been digitally signed.
				</Description>
			</PropertyGroup>
		</When>

		<When Condition="'$(Configuration)' == 'Nightly'">
			<PropertyGroup>
				<PackageId Condition="'$(TFMs)' == 'all'">$(PackageId).Nightly</PackageId>

				<Description Condition="'$(TFMs)' == 'all'">
					An update to Component factory's krypton toolkit to support .NET Framework 4.6.2 - 4.8, .NET Core 3.1 and .NET 5/6. $(Description)

					This package supports all .NET Framework versions starting .NET Framework 4.6.2 - 4.8, .NET Core 3.1 and .NET 5/6.
					Also, all libraries are included targeting each specific framework version for performance purposes.

					This package is for those who want to try out the latest cutting edge features before deployment. Please use $(PackageId) or $(PackageId).Signed if deployment is intended.
				</Description>
			</PropertyGroup>
		</When>

		<When Condition="'$(Configuration)' == 'Installer'">
			<PropertyGroup>
				<PackageId Condition="'$(TFMs)' == 'all'">$(PackageId).Installer</PackageId>

				<Description Condition="'$(TFMs)' == 'all'">
					An update to Component factory's krypton toolkit to support .NET Framework 4.6.2 - 4.8, .NET Core 3.1 and .NET 5/6. $(Description)

					This package supports all .NET Framework versions starting .NET Framework 4.6.2 - 4.8, .NET Core 3.1 and .NET 5/6.
					Also, all libraries are included targeting each specific framework version for performance purposes.

					FOR USE WITH DEMO INSTALLERS ONLY! Please use $(PackageId) or $(PackageId).Signed if deployment is intended.
				</Description>
			</PropertyGroup>
		</When>
		<Otherwise>
			<PropertyGroup>
				<PackageId Condition="'$(TFMs)' == 'all'">$(PackageId)</PackageId>
				<Description Condition="'$(TFMs)' == 'all'">
					An update to Component factory's krypton toolkit to support .NET Framework 4.6.2 - 4.8, .NET Core 3.1 and .NET 5/6. $(Description)

					This package supports all .NET Framework versions starting .NET Framework 4.6.2 - 4.8, .NET Core 3.1 and .NET 5/6.
					Also, all libraries are included targeting each specific framework version for performance purposes.
				</Description>
			</PropertyGroup>
		</Otherwise>
	</Choose>
</Project>